<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: html_head(pageTitle='Danh sach tai khoan')"/>

<body>

<!-- container section start -->
<section id="container" class="">
    <header th:replace="fragments :: bar"></header>
    <aside th:replace="fragments :: menu"></aside>
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="page-header" style="font-family: arial;">
                        <i class="fa fa-gift"></i> Danh sách tài khoản
                    </h3>
                    <ol class="breadcrumb" style="font-family: arial;">
                        <li><a th:href="@{/admin}">Trang chủ</a></li>
                        <li>Liên hệ</li>
                    </ol>
                </div>
            </div>
            <!-- page start-->
            <div class="row">
                <div class="col-lg-12">
                    <form id="search" action="#" th:action="@{user/search}" method="post">
                        <input type="text" th:value="${search}" name="search" placeholder="Search for name ...">
                        <input type="submit" value="Submit">
                    </form>
                    <form id="formSubmit" action="#" th:action="@{/admin/user}" method="get">
                        <section class="panel">
                            <table class="table table-striped table-advance table-hover"
                                   style="font-family: arial;">
                                <tbody>
                                <tr>
                                    <th style="text-align: center;">ID</th>
                                    <th style="text-align: center;">UserName</th>
                                    <th style="text-align: center;">FullName</th>
                                    <th style="text-align: center;">Email</th>
                                    <th style="text-align: center;">Phone</th>
                                    <th style="text-align: center;">Address</th>
                                    <th style="text-align: center;">Enable</th>
                                    <th colspan="2" style="text-align: center;">Action</th>
                                </tr>
                                <tr th:each="u : ${users.getList()}" style="text-align: center;">
                                    <td th:text="${u.id}"></td>
                                    <td th:text="${u.userName}"></td>
                                    <td th:text="${u.fullName}"></td>
                                    <td th:text="${u.email}"></td>
                                    <td th:text="${u.phone}"></td>
                                    <td th:text="${u.address}"></td>
                                    <td th:text="${u.isEnable}? 'Hoạt động' : 'Không hoạt động'"></td>
                                    <td>
                                        <div class="btn-group">
                                            <a class="btn btn-primary"
                                               th:href="@{/admin/user/{id}(id=${u.id})}">Update</a>
                                            <a class="btn btn-danger"
                                               onclick="if(!confirm('Bạn có chắc muốn xóa tài khoản?')) return false;"
                                               th:href="@{/admin/user/delete/{id}(id=${u.id})}">Delete</a>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <br>
                        </section>
                        <ul class="pagination" id="pagination"></ul>
                        <input type="hidden" id="pageNo" name="pageNo" value=""/>
                        <input type="hidden" id="limit" name="limit" value=""/>
                        <input type="hidden" id="sortField" name="sortField" value=""/>
                        <input type="hidden" id="sortDir" name="sortDir" value=""/>
                        <th:block th:if="${search != null}">
                            <input type="hidden" name="keysearch" th:value="${search}"/>
                        </th:block>
                    </form>
                </div>
            </div>
            <!-- page end-->
        </section>
    </section>
    <!--main content end-->

</section>
<script src="https://code.jquery.com/jquery-3.6.0.slim.js"
        integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
<script src="/paging/jquery.twbsPagination.js"></script>
<script src="/paging/jquery.twbsPagination.min.js"></script>
<script type="text/javascript">
    var totalPages = [[${users.totalPage}]];
    var currentPage = [[${users.pageNo}]];
    $(function () {
        window.pagObj = $('#pagination').twbsPagination({
            totalPages: totalPages,
            visiblePages: 3,
            startPage: currentPage,
            onPageClick: function (event, pageNo) {
                if (currentPage !== pageNo) {
                    $('#pageNo').val(pageNo);
                    $('#limit').val(2);
                    $('#sortField').val('userName');
                    $('#sortDir').val('asc');
                    $('#formSubmit').submit();
                }
            }
        });
    });
</script>

</body>
</html>